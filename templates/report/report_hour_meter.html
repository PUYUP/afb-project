{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}
  <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
    <h1 class="display-4">Lihat Report Hour Meter</h1>
  </div>
  <div class="container">
    <div class="card-deck mb-3 text-center">
      <form class="form-inline" method="POST" role="search" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
          <label class="label mr-2" for="alatberatid">Alat Berat</label>
          {{form.alatid}}
        </div>

        <div class="form-group">
          <label class="label mr-2" for="operatorid">Operator</label>
          {{form.operatorid}}
        </div>

        <div class="form-group">
          <label class="label mr-2" for="start_date">Start Date</label>
          {{form.start_date}}
        </div>

        <div class="form-group">
          <label class="label mr-2" for="end_date">End Date</label>
          {{form.end_date}}
        </div>

        <button type="submit" class="btn btn-primary">Cari</button>
      </form>
    </div>
    <div class="card-deck mb-3 text-center">
      <h3>Search result</h3>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Nomor</th>
              <th>Tanggal</th>
              <th>Operator</th>
              <th>Hm Awal</th>
              <th>Hm Akhir</th>
              <th>Jam</th>
              <th>Hm Dunia</th>
              <th>Overtime</th>
              <th>Shift</th>
              <th>Keterangan</th>
            </tr>
          </thead>
          <tbody>
            {% if object_list %}
              {% for obj in object_list%}
                <tr>
                  <td>{{forloop.counter}}</td>
                  <td>{{obj.created}}</td>
                  <td>{{obj.operator_name}}</td>
                  <td>{{obj.hmawal}}</td>
                  <td>{{obj.hmakhir}}</td>
                  <td>{{obj.jam}}</td>
                  <td>{{obj.hmdunia}}</td>
                  <td>{{obj.ot}}</td>
                  <td>{{obj.shift}}</td>
                  <td>{{obj.keterangan}}</td>
                </tr>
              {% endfor %}
            {% else %}
              <tr>
                <td colspan="10">No Data</td>
              </tr>
            {% endif %}
          </tbody>
          <tfoot>
            <tr>
              <td class="text-right" colspan="5">Total</td>
              <td>{{total_jam}}</td>
              <td>{{total_hm_dunia}}</td>
              <td>{{total_overtime}}</td>
              <td colspan="2"></td>
            </tr>
          </tfoot>
        </table>
    </div>
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', function(){
      var start_date = document.querySelector('input[name="start_date"]')
      var end_date = document.querySelector('input[name="end_date"]')

      start_date.DatePickerX.init({
        format: "dd-mm-yyyy"
      });

      end_date.DatePickerX.init({
        format: "dd-mm-yyyy"
      });

    });
  </script>

{% endblock %}
